{
  "name": "wolcendb",
  "version": "1.0.0",
  "main": "index.js",
  "author": "Evan <git@erosson.org>",
  "license": "GPL-3.0",
  "private": true,
  "scripts": {
    "export:pull": "bash -c \"git subtree pull --squash --prefix third-party/WolcenExtractor git@github.com:gabriel-dehan/WolcenExtractor.git master && yarn export:install\"",
    "export:install": "bash -c \"gem install bundler && cd third-party/WolcenExtractor && bundle install\"",
    "export:datamine": "bash -c \"rm -rf datamine build-img && mkdir datamine && node ./cli-src/import_datamine.js\"",
    "export:cp": "bash -c \"yarn export:datamine && yarn _build:search-index\"",
    "export": "bash -c \"echo 'deleting datamine.tmp in 3...' && sleep 3 && rm -rf datamine* build* && cd third-party/WolcenExtractor && ruby src/main.rb extract --source \\\"`cat ../../GAMEPATH`\\\" --dest ../../datamine.tmp --only english_xml.pak,umbra.pak,Libs_UI_ && cd - && cp \\\"`cat GAMEPATH`\\\"/revision.txt datamine.tmp/revision.txt && yarn export:cp\" && echo && echo && echo \"Done! Don't forget to run `yarn deploy:img:datamine` with the right credentials.\"",
    "start": "bash -c \"ELM_DEBUGGER=false elm-app start\"",
    "build": "bash -c \"yarn _build:search-index && yarn _build && yarn _build:ssr\"",
    "_build": "bash -c \"rm -rf build && elm-app build\"",
    "_build:search-index": "bash -c \"elm make cli-src/BuildSearchIndexCLI.elm --output datamine.tmp/BuildSearchIndexCLI.elm.js && node --experimental-modules cli-src/build-search-index-cli.mjs\"",
    "_build:ssr": "bash -c \"rm -rf build-ssr && elm make cli-src/SSRRenderCLI.elm --optimize --output datamine.tmp/SSRRenderCLI.elm.js && elm make cli-src/SSRPagesCLI.elm --optimize --output datamine.tmp/SSRPagesCLI.elm.js && node ./cli-src/ssr-cli.js && rm -rf build-nossr && mv build build-nossr && mv build-ssr build\"",
    "build:ci": "bash -c \"yarn test && yarn build\"",
    "build:serve": "bash -c \"serve build\"",
    "//deploy:img": "--size-only avoids re-uploading on timestamp change",
    "deploy:img": "bash -c \"aws s3 sync --size-only ./build-img/game/ s3://img-wolcendb.erosson.org/game --cache-control max-age=86400 && yarn deploy:img:datamine && yarn deploy:img:ls\"",
    "//deploy:img:datamine": "old versions remain accessible and are uploaded one at a time, so don't --delete.",
    "deploy:img:datamine": "aws s3 sync ./build-img/datamine/ s3://img-wolcendb.erosson.org/datamine --cache-control public,max-age=86400 --content-type application/json",
    "deploy:img:datamine:pull": "aws s3 sync s3://img-wolcendb.erosson.org/datamine ./build-img/datamine/",
    "deploy:img:ls": "aws s3 ls s3://img-wolcendb.erosson.org/datamine/ | node ./cli-src/buildRevisions.js > public/buildRevisions.json",
    "test": "node --experimental-modules tests/fixture.mjs && elm-app test"
  },
  "devDependencies": {
    "@erosson/xlsx-loader": "^1.0.3",
    "create-elm-app": "^4.2.1",
    "css-loader": "^3.4.2",
    "dotenv": "^8.2.0",
    "glob": "^7.1.6",
    "imagemin": "^7.0.1",
    "imagemin-pngquant": "^8.0.0",
    "jsdom": "^16.2.0",
    "json-loader": "^0.5.7",
    "lodash": "^4.17.15",
    "mkdirp": "^1.0.3",
    "ncp": "^2.0.0",
    "node-sass": "^4.13.1",
    "raw-loader": "^4.0.0",
    "sass-loader": "^8.0.2",
    "serve": "^11.3.0",
    "style-loader": "^1.1.3",
    "xml2js": "^0.4.23"
  },
  "dependencies": {
    "@fortawesome/fontawesome-free": "^5.12.1",
    "bootstrap": "^4.4.1",
    "jquery": "^3.4.1",
    "popper.js": "^1.16.1"
  }
}
